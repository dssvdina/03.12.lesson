<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<!-- Dinas code -->
<!-- <body>
    <input type="text" id="name">
    <br>
    <input type="password" id="password">
    <br>
    <input type="password" id="password_2">
    <br>
    <input type="button" value="Регистрация" onclick="registration()">

    <div class="oshibka">
        <p id="error" class="error"></p>
    </div>
    

    
</body> -->
<body>
<div class="okno"> 
    <h1 id="f" class="knopka">Registration</h1>
 <h3 id="active_name"></h3>
 <input type="text" id="name" class="knopka" placeholder="Login">
 <input type="password"  id="password" class="knopka1" placeholder="Password">
 <input type="password"  id="password2" class="knopka2" placeholder="Repeat password">
 <input type="button" value="Log In" onclick="regist()" class="knopka3">
 <p id="er" class="knopka4"></p>
 <a href="index.html" class="knopka5">Log Up</a>
</div>
</body>
<!-- 
<script>
    function registration() {
        let name = document.getElementById('name').value;
        let password = document.getElementById('password').value;
        let password_2 = document.getElementById('password_2').value;
        let name_length = document.getElementById('name').value.length;
        let length_password = document.getElementById('password').value.length;
     
        // let new_user = {
        //     user_name: name,
        //     user_password: password
        // }
        // localStorage.setItem(new_user.user_name, new_user, JSON.stringify(new_user));
        // console.log("Новый пользователь добавлен")


        if (name_length <= 2) {
            document.getElementById("error").textContent = "Add more than 2 symbols"
        } else if (length_password < 8) {
            document.getElementById("error").textContent = "Add more than 2 symbols"
            
        } else if (password != password_2) {
            document.getElementById("error").textContent = "Password mismatch"
        } else if(localStorage.getItem(name)==null){
            document.getElementById("error").textContent = "Add your user name"

            let new_user = {
                user_name: name,
                user_password: password
            }

            localStorage.setItem(new_user.user_name, JSON.stringify(new_user));
            localStorage.setItem(new_user.user_password, JSON.stringify(new_user));
            localStorage.setItem("active_user", new_user.user_name)
            document.getElementById('active_name').textContent = localStorage['active_user']
            document.getElementById("block").style.display = "inline-block";

        } else {
            document.getElementById("error").textContent = "User already exists"
        }
    }

    
        function rem() {
            localStorage.removeItem('active_user')
            document.getElementById("active_name").textContent = ' '
            document.getElementById("block").style.display = "none";
        }

function login_vhod() {
    let login = document.getElementById('login').value;
    let login_password = document.getElementById('password_login').value;

    if(localStorage.getItem(login) != null && localStorage.getItem(login_password) != null) {
        localStorage.setItem("active_user", login)
        document.getElementById('active_name').textContent = localStorage['active_user']
        document.getElementById("eror_log").textContent = ""
        document.getElementById("block").style.display = "inline-block";
    }else {
        document.getElementById("eror_log").textContent = "Incorrect password or login"
    }
}

function change() {
    let new_pass = document.getElementById('passwordC').value;
    let new_user = {
        user_name: localStorage['active_user'],
        user_password: new_pass
    }
    localStorage.setItem(new_user.user_password, JSON.stringify(new_user));
    document.getElementById("block").style.display = "inline-block";
} -->










<script>
    function regist(){
        let name = document.getElementById('name').value;
        let password = document.getElementById('password').value;
        let password2 = document.getElementById('password2').value;

        if(localStorage.getItem(name)==null){
            if (name.length >= 2){
                if(password.length >= 8){
                    if(password == password2){
                        let new_user = {
                            user_name: name,
                            user_password: password
                        }
                        localStorage.setItem(new_user.user_name,JSON.stringify(new_user));
                        localStorage.setItem("active_user",new_user.user_name)
                        document.getElementById('active_name').textContent = localStorage['active_user']
                        console.log("New user added")
                        document.location.href = "index.html";
                    }    
                    else{
                        document.getElementById('er').textContent = 'Passwords must match'
                    }
                }
                else{
                document.getElementById('er').textContent = ' Password must be more than 8 symbols'
            }  
            }
            else{
                document.getElementById('er').textContent = ' Login must be at least 3 symbols'
            }
        }

        else{
            console.log('User already exist')
            document.getElementById('er').textContent = ' User already exist!'
        }



    }
    function rem(){
        localStorage.removeItem('active_user')
        document.getElementById("active_name").textContent = ' '
    }

    function wel(){
        let name1 = document.getElementById('name1').value;
        let password1 = document.getElementById('password1').value;
   
        if(localStorage.getItem(name1) != null){
            let user_obj = localStorage.getItem(name1)
            let user = JSON.parse(user_obj)
            console.log('User already exist')
            console.log(user.user_password)

            if(user.user_password == password1){    
                document.location.href = "index2.html";
                localStorage.setItem("active_user",user.user_name)
                document.getElementById('active_name').textContent = localStorage['active_user']
            }
            else{
                document.getElementById('er').textContent = ' Incorrect password'
            }
        }
        else{
            document.getElementById('er').textContent = ' User already exist!'
        }
    }

    
</script>

    
<!-- </script> -->
</html>